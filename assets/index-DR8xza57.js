import{r as m,a as L,g as M,i as N,j as b}from"./index-DOHkHXxQ.js";const O={step:0},W=m.createContext([O,()=>{}]);var S={};(function(u){var l=N;Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=l(L());function x(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(w){return Object.getOwnPropertyDescriptor(t,w).enumerable})),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?x(Object(a),!0).forEach(function(i){(0,r.default)(t,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))})}return t}var p=window,y=p.requestAnimationFrame,c=function(){return new Date().getTime()},o="There is nothing to undo.",f=c(),g={enable:!1,timestamp:f,stopTime:f,lastTime:f,fps:0},n=d({},g),s={do:function(){},list:[]},E=function(e){s.list.push(s.do),s.do=function(a){return function(){return e(arguments[0]),a.apply(this,arguments)}}(s.do)},F=function t(){if(n.enable){var e=c(),a=n.fps?1e3/n.fps:0,i=e-n.lastTime;if(i<a){y(function(){return t()});return}n.lastTime=e;var w=e-n.timestamp;s.do({delta:w}),y(function(){return t()})}},D=function(){if(!n.enable){n.enable=!0;var e=c()-n.stopTime;n.timestamp+=e,F()}},C=function(){n.enable=!1,n.stopTime=c()},R=function(){n.enable=g.enable,s.do=function(){},s.list=[]},_=function(){var e=s.list;if(e.length===0){console.warn(o);return}s.do=e[e.length-1],e.pop()},k=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30;n.fps=e},q=function(){n.timestamp=c(),n.stopTime=c(),n.lastTime=c()},H={add:E,todo:s,play:D,stop:C,destroy:R,undo:_,setFPS:k,reset:q};u.default=H})(S);const P=M(S),v=[{x:100,y:50},{x:150,y:50},{x:200,y:50},{x:250,y:50},{x:300,y:50},{x:350,y:50},{x:400,y:50},{x:400,y:100},{x:400,y:150},{x:400,y:200},{x:400,y:250},{x:400,y:300},{x:400,y:350},{x:350,y:350},{x:300,y:350},{x:250,y:350},{x:200,y:350},{x:150,y:350},{x:100,y:350},{x:100,y:300},{x:100,y:250},{x:100,y:200},{x:100,y:150},{x:100,y:100}],h=20,j=[{blur:15,color:"#fff"},{blur:35,color:"#008cff"},{blur:35,color:"#0ff"}],T=new URLSearchParams(window.location.search).get("fps"),A=Math.max(2,Math.min(Number(new URLSearchParams(window.location.search).get("max")||v.length),v.length)),U=m.memo(()=>{const u=m.useRef(v),l=m.useRef(null);return m.useEffect(()=>{if(l.current){const r=l.current.getContext("2d");if(r){const x=()=>{r.clearRect(0,0,500,500),r.strokeStyle="#fff",r.lineWidth=h,r.lineCap="round";let d=null,p=null;const y=u.current.slice(0,A);y.forEach((o,f)=>{[...new Array(j.length).keys()].forEach(g=>{if(d){const{blur:n,color:s}=j[g%j.length];r.shadowBlur=n,r.shadowColor=s,r.beginPath(),r.lineWidth=h-f*(h/v.length),r.moveTo(d.x,d.y),r.lineTo(o.x,o.y),r.stroke()}}),d=o}),y.forEach((o,f)=>{p&&(r.beginPath(),r.lineWidth=h-f*(h/v.length),r.moveTo(p.x,p.y),r.lineTo(o.x,o.y),r.stroke()),p=o}),(()=>{const o=u.current.pop();o&&u.current.unshift(o)})()};T&&P.setFPS(Number(T)),P.add(x),P.play()}}},[]),b.jsx("canvas",{ref:l,width:500,height:500,className:"Canvas"})}),B=m.memo(()=>{const[u,l]=m.useState(O);return b.jsx("div",{className:"Home",children:b.jsx(W.Provider,{value:[u,l],children:b.jsx(U,{})})})});export{B as default};
