import{r as x,a as _,g as q,i as H,j as w}from"./index-C2fWc96O.js";const S={step:0},U=x.createContext([S,()=>{}]);var E={};(function(f){var h=H;Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var r=h(_());function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);e&&(u=u.filter(function(P){return Object.getOwnPropertyDescriptor(t,P).enumerable})),a.push.apply(a,u)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?v(Object(a),!0).forEach(function(u){(0,r.default)(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}var c=window,l=c.requestAnimationFrame,o=function(){return new Date().getTime()},s="There is nothing to undo.",p=o(),g={enable:!1,timestamp:p,stopTime:p,lastTime:p,fps:0},n=d({},g),i={do:function(){},list:[]},F=function(e){i.list.push(i.do),i.do=function(a){return function(){return e(arguments[0]),a.apply(this,arguments)}}(i.do)},k=function t(){if(n.enable){var e=o(),a=n.fps?1e3/n.fps:0,u=e-n.lastTime;if(u<a){l(function(){return t()});return}n.lastTime=e;var P=e-n.timestamp;i.do({delta:P}),l(function(){return t()})}},D=function(){if(!n.enable){n.enable=!0;var e=o()-n.stopTime;n.timestamp+=e,k()}},R=function(){n.enable=!1,n.stopTime=o()},C=function(){n.enable=g.enable,i.do=function(){},i.list=[]},N=function(){var e=i.list;if(e.length===0){console.warn(s);return}i.do=e[e.length-1],e.pop()},A=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30;n.fps=e},L=function(){n.timestamp=o(),n.stopTime=o(),n.lastTime=o()},M={add:F,todo:i,play:D,stop:R,destroy:C,undo:N,setFPS:A,reset:L};f.default=M})(E);const j=q(E),O=[{x:100,y:50},{x:150,y:50},{x:200,y:50},{x:250,y:50},{x:300,y:50},{x:350,y:50},{x:400,y:50},{x:400,y:100},{x:400,y:150},{x:400,y:200},{x:400,y:250},{x:400,y:300},{x:400,y:350},{x:350,y:350},{x:300,y:350},{x:250,y:350},{x:200,y:350},{x:150,y:350},{x:100,y:350},{x:100,y:300},{x:100,y:250},{x:100,y:200},{x:100,y:150},{x:100,y:100}],b=20,T=[{blur:15,color:"#fff"},{blur:35,color:"#008cff"},{blur:35,color:"#0ff"}],y=new URLSearchParams(window.location.search).get("fps"),m=Math.max(2,Math.min(Number(new URLSearchParams(window.location.search).get("max")||O.length),O.length)),W=x.memo(()=>{const f=x.useRef(O),h=x.useRef(null);return x.useEffect(()=>{if(h.current){const r=h.current.getContext("2d");if(r){const v=()=>{r.clearRect(0,0,500,500),r.lineWidth=b,r.lineCap="round";let d=null,c=null;const l=f.current.slice(0,m);l.forEach((s,p)=>{[...new Array(T.length).keys()].forEach(g=>{if(d){const{blur:n,color:i}=T[g%T.length];r.shadowBlur=n,r.shadowColor=i,r.strokeStyle=`rgba(255, 255, 255, ${m-p*(1/m)})`,r.beginPath(),r.lineWidth=b-p*(b/m),r.moveTo(d.x,d.y),r.lineTo(s.x,s.y),r.stroke()}}),d=s}),l.forEach((s,p)=>{c&&(r.beginPath(),r.lineWidth=b-p*(b/m),r.moveTo(c.x,c.y),r.lineTo(s.x,s.y),r.stroke()),c=s}),(()=>{const s=f.current.pop();s&&f.current.unshift(s)})()};y&&j.setFPS(Number(y)),j.add(v),j.play()}window.addEventListener("keydown",v=>{const{key:d}=v;let c=m,l=Number(y);switch(d){case"ArrowUp":c=m+1;break;case"ArrowDown":c=m-1;break;case"ArrowLeft":l=Number(y)-1;break;case"ArrowRight":l=Number(y)+1;break}if(m!==c||y&&l!==Number(y)){const o=new URL(window.location.href);o.searchParams.set("max",Math.max(Math.min(c,20),2).toString()),y&&o.searchParams.set("fps",l.toString()),window.location.href=o.toString()}})}},[]),w.jsx("canvas",{ref:h,width:500,height:500,className:"Canvas"})}),B=x.memo(()=>{const[f,h]=x.useState(S);return w.jsx("div",{className:"Home",children:w.jsx(U.Provider,{value:[f,h],children:w.jsx(W,{})})})});export{B as default};
